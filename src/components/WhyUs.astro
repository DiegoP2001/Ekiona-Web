---
---

<style>
  .why-us {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin: 0px 128px 0px 128px;
    padding: 100px 80px;
    background-color: rgb(242, 242, 242);
  }

  .ovalo {
    position: relative;
    border: 4px solid #fff;
    width: 700px;
    height: 400px;

    border-left: 0;
    border-top-right-radius: 50%;
    border-bottom-right-radius: 50%;
  }

  /* rgb(242, 196, 23) */

  .circle {
    position: absolute;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    width: 80px;
    height: 80px;
    background-color: #fff;
    border-radius: 50%;
    top: 40%;
    left: 40%;
    transform: translateX(-50%);
    transition: all 0.5s ease;
    opacity: 0;

    &&:hover {
      cursor: pointer;
      background-color: rgb(242, 196, 23);
    }
  }

  .circle:hover svg {
    fill: white;
  }

  .circle > svg {
    width: 50px;
    height: 50px;
  }

  .active {
    background-color: rgb(242, 196, 23);

    svg {
      fill: white;
    }
  }

</style>

<section class="why-us">
  <h2 class="text-3xl mb-8">¿Necesitas una solución de iluminación solar?</h2>
  <p class="text-md mb-16 w-[70%] text-center">
    Nuestro objetivo es satisfacer las necesidades de iluminación de nuestros
    clientes. Para ello realizamos un exhaustivo estudio personalizado.
  </p>
  <div class="ovalo">
    <div class="why-us-description absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-55%]">
    <h2 
    id="why-title"
    class="text-center text-2xl"
    >
    
    </h2>
    <p class="why-desc text-center text-md mt-8"></p>
    </div>
    <span class="circle" data-id="0"
      ><svg
        xmlns="http://www.w3.org/2000/svg"
        height="35px"
        viewBox="0 -960 960 960"
        width="35px"
        fill="#222"
        ><path
          d="M480-480q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Zm0 294q122-112 181-203.5T720-552q0-109-69.5-178.5T480-800q-101 0-170.5 69.5T240-552q0 71 59 162.5T480-186Zm0 106Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 100-79.5 217.5T480-80Zm0-480Z"
        ></path></svg
      ></span
    >
    <span class="circle second" data-id="1">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="35px"
        viewBox="0 -960 960 960"
        width="35px"
        fill="#222"
        ><path
          d="M280-280h80v-200h-80v200Zm320 0h80v-400h-80v400Zm-160 0h80v-120h-80v120Zm0-200h80v-80h-80v80ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Z"
        ></path></svg
      >
    </span>
    <span class="circle third" data-id="2">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="35px"
        viewBox="0 -960 960 960"
        width="35px"
        fill="#222"
        ><path
          d="M440-120v-240h80v80h320v80H520v80h-80Zm-320-80v-80h240v80H120Zm160-160v-80H120v-80h160v-80h80v240h-80Zm160-80v-80h400v80H440Zm160-160v-240h80v80h160v80H680v80h-80Zm-480-80v-80h400v80H120Z"
        ></path></svg
      >
    </span>
    <span class="circle fourth" data-id="3">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="35px"
        viewBox="0 -960 960 960"
        width="35px"
        fill="#222"
        ><path
          d="M160-160v-120h160v120H160Zm0-160v-160h160v160H160Zm0-200v-280h160v280H160Zm240 360v-280h160v280H400Zm0-320v-160h160v160H400Zm0-200v-120h160v120H400Zm240 520v-80h160v80H640Zm0-120v-160h160v160H640Zm0-200v-320h160v320H640Z"
        ></path></svg
      >
    </span>
    <span class="circle fifth" data-id="4">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="35px"
        viewBox="0 -960 960 960"
        width="35px"
        fill="#222"
        ><path
          d="M686-132 444-376q-20 8-40.5 12t-43.5 4q-100 0-170-70t-70-170q0-36 10-68.5t28-61.5l146 146 72-72-146-146q29-18 61.5-28t68.5-10q100 0 170 70t70 170q0 23-4 43.5T584-516l244 242q12 12 12 29t-12 29l-84 84q-12 12-29 12t-29-12Zm29-85 27-27-256-256q18-20 26-46.5t8-53.5q0-60-38.5-104.5T386-758l74 74q12 12 12 28t-12 28L332-500q-12 12-28 12t-28-12l-74-74q9 57 53.5 95.5T360-440q26 0 52-8t47-25l256 256ZM472-488Z"
        ></path></svg
      >
    </span>
    <span class="circle sixth" data-id="5">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="35px"
        viewBox="0 -960 960 960"
        width="35px"
        fill="#222"
        ><path
          d="M760-480q0-117-81.5-198.5T480-760v-80q75 0 140.5 28.5t114 77q48.5 48.5 77 114T840-480h-80Zm-160 0q0-50-35-85t-85-35v-80q83 0 141.5 58.5T680-480h-80Zm198 360q-125 0-247-54.5T329-329Q229-429 174.5-551T120-798q0-18 12-30t30-12h162q14 0 25 9.5t13 22.5l26 140q2 16-1 27t-11 19l-97 98q20 37 47.5 71.5T387-386q31 31 65 57.5t72 48.5l94-94q9-9 23.5-13.5T670-390l138 28q14 4 23 14.5t9 23.5v162q0 18-12 30t-30 12ZM241-600l66-66-17-94h-89q5 41 14 81t26 79Zm358 358q39 17 79.5 27t81.5 13v-88l-94-19-67 67ZM241-600Zm358 358Z"
        ></path></svg
      >
    </span>
  </div>
</section>

<script>
  const section = document.querySelector(".why-us");
  const circles = document.querySelectorAll("span.circle");
  const title = document.querySelector("#why-title");
  const desc = document.querySelector(".why-desc");

  let activeIndex = 0;

  const whyTitle = [
    "1. Análisis de situación geográfica",
    "2. Examen de las necesidades",
    "3. Dimensionamiento de la farola",
    "4. Fabricación y testeo",
    "5. Instalación",
    "6. Servicio post-venta"
  ]

  const whyDesc = [
    "Calculamos la producción de energía eléctrica real a través de la radiación solar medida en el lugar donde se requiere iluminar.",
    "Estudiamos las necesidades reales de iluminación para garantizar la mejor solución técnico-económica.",
    "Dimensionamos todos los parámetros de la farola: potencia lumínica, capacidad de la batería, inclinación y potencia del panel solar, altura de la columna, intensidad y horario de encendido y apagado de la luminaria.",
    "Fabricamos y realizamos todas las pruebas necesarias asegurando el óptimo funcionamiento.",
    "Gracias a la fabricación por módulos, la manipulación y montaje de la farola se realiza de una forma ágil, rápida y sencilla.",
    "Siéntete siempre respaldado gracias a nuestro servicio post-venta desde el que te asesoramos y ayudamos ante cualquier duda."
  ]

  let observerOptions = {
    root: null,
    rootMargin: "0px",
    threshold: 0.5,
  };

  let observer = new IntersectionObserver((entries, observer) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        
        title.textContent = ""
        desc.textContent = ""

        circles[0].animate(
            {
                top: ["40%", "0%"],
                left: ["40%", "0%"],
                transform: ["translateX(-50%)", "translateY(-50%)"],
                opacity: [0, 1]
            }, 
            {
                fill: "both",
                duration: 1000,
                delay: 500,
            }
        )
        
        circles[1].animate(
            {
                left: ["40%", "35%"],
                top: ["40%","0%"],
                transform: ["translateY(-50%)"],
                opacity: [0, 1]
            }, 
            {
                fill: "both",
                duration: 1000,
                delay: 1000,
            }
        )

        circles[2].animate(
            {
                top: ["40%", "0%"],
                left: ["40%", "70%"],
                transform: ["translateX(-50%)", "translateY(1%)"],
                opacity: [0, 1]
            }, 
            {
                fill: "both",
                duration: 1000,
                delay: 1500,
            }
        )

        circles[3].animate(
            {
                top: ["40%"],
                left: ["40%", "70%"],
                transform: ["translateX(-50%)", "translateY(180px)"],
                opacity: [0, 1]
            }, 
            {
                fill: "both",
                duration: 1000,
                delay: 2000,
            }
        )

        circles[4].animate(
            {
                top: ["40%", "100%"],
                left: ["40%", "35%"],
                transform: ["translateX(-50%)", "translateY(-50%)"],
                opacity: [0, 1]
            }, 
            {
                fill: "both",
                duration: 1000,
                delay: 2500,
            }
        )

        circles[5].animate(
            {
                top: ["40%", "100%"],
                left: ["40%", "0%"],
                transform: ["translateX(-50%)", "translateY(-50%)"],
                opacity: [0, 1]
            }, 
            {
                fill: "both",
                duration: 1000,
                delay: 3000,
            }
        )

      }
    });
  }, observerOptions);

  observer.observe(section);

  function showDescription (index) {

    title.textContent = whyTitle[index]
    desc.textContent = whyDesc[index]

    activeIndex = index

  }

  function moveIndex (index) {

    // alert( activeIndex )

    circles[activeIndex].classList.remove("active"); 

    if (activeIndex === circles.length - 1) {
      
      console.log(index)
      activeIndex = 0;

    } else {
      
      activeIndex++;
    }

    circles[activeIndex].classList.add("active"); 
    showDescription(activeIndex); 

  }

  let moveActiveIndexId = setInterval(() => {

    moveIndex(activeIndex)

  }, 4000)


  circles.forEach((circle) => {

    circle.addEventListener('mouseenter', () => {
      
      circles.forEach((circle) => {

        circle.classList.remove("active")

      })
      showDescription(circle.getAttribute("data-id"))
      clearInterval(moveActiveIndexId)
    })

    circle.addEventListener('mouseleave', () => {

      activeIndex = parseInt(circle.getAttribute("data-id"))

      circles[circle.getAttribute("data-id")].classList.add("active")

      moveActiveIndexId = setInterval(() => {

        moveIndex(activeIndex)

      }, 4000)

    })

  })

  
</script>

